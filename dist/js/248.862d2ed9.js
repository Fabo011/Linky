"use strict";(self["webpackChunklinky"]=self["webpackChunklinky"]||[]).push([[248],{1752:function(e,t,n){n.d(t,{c:function(){return l}});var r=n(4108),s=n(9096);const a={type:"button",class:"btn w-100"};function o(e,t,n,o,i,c){return(0,r.Wz)(),(0,r.An)("button",a,(0,s.WA)(e.buttonText),1)}var i=(0,r._M)({name:"TheAuthButton.vue",beforeMount(){const e=this.$route.name;"signin"===e?this.buttonText="Login":"signup"===e?this.buttonText="Register":"key"===e&&(this.buttonText="Got To Account")},data(){return{buttonText:""}}}),c=n(4100);const u=(0,c.c)(i,[["render",o],["__scopeId","data-v-759425f2"]]);var l=u},9964:function(e,t,n){n.r(t),n.d(t,{default:function(){return ee}});var r=n(4108),s=n.p+"img/magic-cat.4813d0e6.png";const a=e=>((0,r.ED)("data-v-7a93dcb5"),e=e(),(0,r.ii)(),e),o={class:"container mt-5"},i={class:"row d-flex justify-content-center"},c={class:"col-md-6"},u={class:"card px-4 py-5 shadow p-3 mb-5 bg-body rounded border-0",id:"form1"},l=a((()=>(0,r.QD)("div",null,[(0,r.QD)("h3",{class:"magic-container"},[(0,r.QD)("img",{id:"img",src:s,alt:"Magic Cat"})]),(0,r.QD)("b",{class:"magic"},"Login")],-1))),d=a((()=>(0,r.QD)("hr",null,null,-1))),h={class:"form-data"};function p(e,t,n,s,a,p){const m=(0,r.E1)("PageNav"),g=(0,r.E1)("TheUsername"),v=(0,r.E1)("ThePassword"),f=(0,r.E1)("TheSignInButton"),w=(0,r.E1)("TheFooter");return(0,r.Wz)(),(0,r.An)(r.ae,null,[(0,r.K2)(m),(0,r.QD)("section",o,[(0,r.QD)("div",i,[(0,r.QD)("div",c,[(0,r.QD)("div",u,[l,d,(0,r.QD)("form",h,[(0,r.K2)(g),(0,r.K2)(v),(0,r.K2)(f)])])])])]),(0,r.K2)(w)],64)}var m=n(9096),g=n(7764);const v={class:"forms-inputs mb-4"},f=(0,r.QD)("span",null,[(0,r.QD)("b",null,"Password")],-1),w={id:"mark-counter"},b=(0,r.QD)("br",null,null,-1),y={class:"text-danger"};function D(e,t,n,s,a,o){return(0,r.Wz)(),(0,r.An)("div",v,[f,(0,r.mY)(),(0,r.QD)("mark",w,(0,m.WA)(e.password.length)+"/25",1),(0,r.mY)(),b,(0,r.wt)((0,r.QD)("input",{autocomplete:"off",type:"password","onUpdate:modelValue":t[0]||(t[0]=t=>e.password=t),minlength:"10",maxlength:"25",class:"w-100",onInput:t[1]||(t[1]=(...t)=>e.validatePass&&e.validatePass(...t)),onClick:t[2]||(t[2]=(0,g.Y7)(((...t)=>e.resetInput&&e.resetInput(...t)),["prevent"]))},null,544),[[g.Og,e.password]]),(0,r.QD)("p",y,(0,m.WA)(e.passwordError),1)])}var E=n(8948),Q=(0,r._M)({data(){return{password:"",passwordError:""}},methods:{validatePass(){this.password.length<=9?this.passwordError="Password may have between 10 and 25 characters":this.passwordError="",E.i.password=this.password},resetInput(){this.passwordError=""}}}),k=n(4100);const T=(0,k.c)(Q,[["render",D]]);var x=T;n(1960);const I={class:"mb-3"},A={class:"text-danger"};function B(e,t,n,s,a,o){const i=(0,r.E1)("AuthBtn"),c=(0,r.E1)("LoadingButton");return(0,r.Wz)(),(0,r.An)(r.ae,null,[(0,r.QD)("div",I,[e.nBtn?((0,r.Wz)(),(0,r.Az)(i,{key:0,onClick:(0,g.Y7)(e.push,["prevent"])},null,8,["onClick"])):(0,r.g1)("",!0),e.loading?((0,r.Wz)(),(0,r.Az)(c,{key:1})):(0,r.g1)("",!0)]),(0,r.QD)("p",A,(0,m.WA)(e.errorText),1)],64)}var W=n(1752),_=n(4720),z=n(8664),C=n(3927),M=(0,r._M)({name:"TheLoginButton.vue",components:{LoadingButton:_.c,AuthBtn:W.c},data(){return{buttonText:"Login",store:E.i,errorText:"",nBtn:!0,loading:!1}},methods:{async push(){this.nBtn=!1,this.loading=!0;const e=E.i.email,t=E.i.password,n={data:{tariff:"free"}};try{const{error:r}=await C.G.auth.signInWithPassword({email:e,password:t});if(r){const{error:r}=await C.G.auth.signUp({email:e,password:t,options:n});if(r)this.errorText="If you try to login: Check username or password. If you try to login first time: Username already in use. Try another one.",this.clearFucnction();else{this.clearFucnction();const{key:e,iv:t}=(0,z.aj)(),n=`${e}.${t}`;sessionStorage.setItem("key",n),E.i.state="newuser",this.$router.push("/key")}}else this.clearFucnction(),E.i.state="authenticatedUser",this.$router.push("/key")}catch(r){this.clearFucnction(),this.errorText="Internal Error. Try again or contact support."}},clearFucnction(){E.i.password="",this.nBtn=!0,this.loading=!1}}});const P=(0,k.c)(M,[["render",B]]);var U=P;const F=e=>((0,r.ED)("data-v-6992f16c"),e=e(),(0,r.ii)(),e),L={class:"forms-inputs mb-3"},$=F((()=>(0,r.QD)("span",null,[(0,r.QD)("b",null,"Username")],-1))),Y={id:"mark-counter"},K=F((()=>(0,r.QD)("br",null,null,-1))),S={class:"text-danger"};function G(e,t,n,s,a,o){return(0,r.Wz)(),(0,r.An)("div",L,[$,(0,r.mY)(),(0,r.QD)("mark",Y,(0,m.WA)(e.username.length)+"/12",1),K,(0,r.wt)((0,r.QD)("input",{autocomplete:"off",type:"text",minlength:"4",maxlength:"12",class:"w-100","onUpdate:modelValue":t[0]||(t[0]=t=>e.username=t),onInput:t[1]||(t[1]=(...t)=>e.validate&&e.validate(...t)),onClick:t[2]||(t[2]=(0,g.Y7)(((...t)=>e.resetInput&&e.resetInput(...t)),["prevent"]))},null,544),[[g.Og,e.username]]),(0,r.QD)("p",S,(0,m.WA)(e.usernameError),1)])}function O(e){return{all:e=e||new Map,on:function(t,n){var r=e.get(t);r?r.push(n):e.set(t,[n])},off:function(t,n){var r=e.get(t);r&&(n?r.splice(r.indexOf(n)>>>0,1):e.set(t,[]))},emit:function(t,n){var r=e.get(t);r&&r.slice().map((function(e){e(n)})),(r=e.get("*"))&&r.slice().map((function(e){e(t,n)}))}}}const V=O();var j=V,N=(0,r._M)({data(){return{username:"",usernameError:""}},created(){this.receiveMessageEventBus()},methods:{validate(){const e=new RegExp(/^[a-zA-Z0-9]+$/);e.test(this.username)?this.username.length<=3?this.usernameError="Username may have between 4 and 12 characters":this.usernameError="":this.usernameError="Don`t use special characters. Correct example: John122",E.i.email=`${this.username}@linky.com`.toLowerCase()},resetInput(){this.usernameError=""},receiveMessageEventBus(){j.on("clearUsernameInput",(()=>{this.username=""}))}}});const R=(0,k.c)(N,[["render",G],["__scopeId","data-v-6992f16c"]]);var J=R,Z=n(4996),q=n(960),H=(0,r._M)({name:"SigninView.vue",components:{TheSignInButton:U,PageNav:q.c,TheFooter:Z.c,TheUsername:J,ThePassword:x}});const X=(0,k.c)(H,[["render",p],["__scopeId","data-v-7a93dcb5"]]);var ee=X}}]);
//# sourceMappingURL=248.862d2ed9.js.map